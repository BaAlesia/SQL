Проектирование концептуальной модели базы данных
Шаг 1. Детально проанализировать предметную область и выделить те информационные объекты, которые будут храниться в базе данных (выделены зеленым):
В интернет-магазине продаются книги. Каждая книга имеет название, написана одним автором, относится к одному жанру, имеет определенную цену. 
В магазине в наличии есть несколько экземпляров каждой книги. 
Покупатель регистрируется на сайте интернет-магазина, задает свое имя и фамилию,  электронную почту и город проживания (для упрощения считаем, 
что человек не может поменять свой город проживания). Он может сформировать один или несколько заказов,  для каждого заказа написать какие-то пожелания. 
Каждый заказ включает одну или несколько книг, каждую книгу можно заказать в нескольких экземплярах. Затем заказ проходит ряд последовательных 
этапов (операций): оплачивается, упаковывается, передается курьеру или транспортной компании для транспортировки и, наконец, доставляется покупателю. 
Фиксируется дата каждой операции. Для каждого города известно среднее время доставки книг.
При этом в магазине ведется учет книг, при покупке их количество уменьшается, при поступлении товара увеличивается, при исчерпании количества – оформляется заказ и пр.
Шаг 2. Для каждого выделенного информационного объекта указать его характеристики, для этого:
а) сначала выделить их в описании предметной области (синий цвет): 
В интернет-магазине продаются книги. Каждая книга имеет название, написана одним автором, относится к одному жанру, имеет определенную цену. В магазине в
наличии есть несколько экземпляров каждой книги. 
Покупатель регистрируется на сайте интернет-магазина, задает свое имя и фамилию,  электронную почту и город проживания. Он может сформировать один или
несколько заказов, для каждого заказа написать какие-то пожелания. Каждый заказ включает одну или несколько книг, каждую книгу можно заказать в 
нескольких экземплярах. Затем заказ проходит ряд последовательных этапов(операций): оплачивается, упаковывается, передается курьеру или транспортной
компании для транспортировки и, наконец, доставляется покупателю. Фиксируется дата каждой операции. Для каждого города известно среднее время доставки книг.
При этом в магазине ведется учет книг, при покупке их количество уменьшается, при поступлении товара увеличивается, при исчерпании
количества – оформляется заказ и пр.
б) затем связать их с информационным объектом: 
Книга – название, количество, цена;
Автор – фамилия и инициалы;
Жанр – название;
Покупатель (клиент) – фамилия и имя, электронная почта;
Город – название, среднее время доставки;
Заказ – код заказа, пожелания;
Этап – название этапов.
в) перечислить характеристики, которые остались не привязанными к информационным объектам (к ним необходимо вернуться при реализации связей между таблицами): 
книги в заказе;
количество книг в заказе;
дата каждой операции.
Шаг 3. Нарисовать схему, на которой изобразить информационные объекты в виде прямоугольников:
Шаг 4. Установить связи между информационными объектами. Связь «один ко многим» обозначить в виде →, «многие ко многим» –  ↔.
Каждая книга написана одним автором, каждый автор написал несколько книг, следовательно между этими таблицами связь «один ко многим»:
Каждая книга может включаться в несколько заказов, один заказ может содержать несколько книг, между этими таблицами связь «многие ко многим»:
Каждый клиент может сформировать несколько заказов, каждый заказ формируется только одним клиентом:

1) genre - название жанра
2) book - автор
3) author - название книги, автор, цена, количество на складе, id жанра и автора
4) city - город клиента и время доставки
5) client - имя клиента, почта, id города
6) buy - пожелания покупателя и id клиента
7) buy_book - таблица с количество заказа покупателей, id книг и таблицы с данными клиента
8) step - этапы обработки заказа клиента
9) buy_step - даты начала и окончания этапов обработки заказа с id данными клиента и этапа


Запросы на основе трех и более связанных таблиц
Пример
Вывести фамилии всех клиентов, которые заказали книгу Булгакова «Мастер и Маргарита».
Запрос:
Этот запрос строится на основе нескольких таблиц, для удобства нужно определить фрагмент логической схемы базы данных, на основе которой строится запрос.
В нашем случае выбираются название книги из таблицы book и фамилия клиента из таблицы client. Эти таблицы между собой непосредственно не связаны, 
поэтому нужно добавить «связующие» таблицы  buy и buy_book:
Для соединения этих таблиц используется INNER JOIN. Для удобства рекомендуется связи описывать последовательно: client → buy → buy_book → book.  
А для соединения использовать пару первичный ключ и внешний ключ соответствующих таблиц. Например,
соединение таблиц client и buy осуществляется по условию client.client_id = buy.client_id.
Чтобы не усложнять схему, будем считать, что нам известен id Булгакова (это 1)
SELECT DISTINCT name_client
FROM 
    client 
    INNER JOIN buy ON client.client_id = buy.client_id
    INNER JOIN buy_book ON buy_book.buy_id = buy.buy_id
    INNER JOIN book ON buy_book.book_id=book.book_id
WHERE title ='Мастер и Маргарита' and author_id = 1;                    
В запросе отбираются уникальные клиенты (DISTINCT) так как один и тот же клиент мог заказать одну и ту же книгу несколько раз.


